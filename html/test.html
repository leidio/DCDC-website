<!DOCTYPE html>
<html>
  
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>An auto-wrapping text flow element for the svg.js library</title>
    <meta name="description" content="SVG does not support auto wrapping text. This plugin for svg.js adds text flow functionality." />
    
    <style type="text/css" media="screen">
      body, html, #canvas { margin: 0; width: 100%; height: 100%; background-color: #F5F6F0; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; }
      #copyright { width: 600px; margin-left: -300px; left: 50%; bottom: 0px; text-align: center; font-size: 10px; position: absolute; }
    </style>
  </head>
  
  <body>
    <div id="canvas"></div>
    
    <p id="copyright">
      This is <a href="https://github.com/wout/svg.textflow.js">a text flow plugin</a> for <a href="http://svgjs.com">svg.js</a>, the lightweight SVG JavaScript library
    </p>
    
  </body>
  <script type="text/javascript" src="../js/svg.js"></script>
  <script type="text/javascript" src="../js/svg.textflow.js"></script>
  <script type="text/javascript" src="../js/svg.draggable.js"></script>

  
  <script type="text/javascript" charset="utf-8">
    var text, draw, flow, frame, handle, box, autowrap, group, overflow, overframe
    
    /* example text */
    text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse porta hendrerit volutpat. Ut id consequat nisi. Nulla facilisis consequat convallis. Integer suscipit sagittis arcu vel eleifend. Aenean porttitor, nisi ut vestibulum aliquet, lacus velit tempus dui, sit amet vestibulum turpis ante vel orci. Donec dignissim lacinia enim at sollicitudin. Donec blandit ultricies feugiat. \n\n\nNunc consectetur vestibulum massa quis gravida. Praesent ultricies consequat arcu at facilisis. Vestibulum eget erat vitae ligula aliquam facilisis sollicitudin eu nunc. Mauris vehicula volutpat tellus, at viverra magna eleifend id. Phasellus tristique commodo nisl quis sodales. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nulla facilisi. Pellentesque rutrum bibendum velit, non convallis magna tempor at.'
    
    /* create svg canvas */
    draw = SVG('canvas')
    
    /* create resizable textflow */
    flow = draw.textflow(text, 250, 500)
      .font({ family: 'Helvetica Neue, Helvetica, Arial, sans-serif', weight: 100, size: 18, anchor: 'start' })
      .move(100.5, 50.5)
      .fill('#666')
      .style({ 'text-shadow': '0 1px 0 #fff' })
    
    /* create resizable frame */
    box = flow.bbox()
    frame = draw.rect(box.width, box.height)
      .move(Math.round(box.x) + 0.5, Math.round(box.y) + 0.5)
      .fill('none')
      .stroke({ color: '#f09', width: 1 })
    
    /* create overflow group */
    group = draw.group()
    
    /* craete resize handle */
    handle = draw.circle(10)
      .center(frame.attr('x') + frame.attr('width'), frame.attr('y') + frame.attr('height'))
      .fill('#f09')
      .draggable()
    
    handle.dragmove = function() {
      frame.size(Math.round(handle.cx() - frame.x()), Math.round(handle.cy() - frame.y()))
    }
    
    handle.dragend = function() {
      flow.size(handle.cx() - frame.x(), handle.cy() - frame.y())
      autowrap()
    }
    
    /* automatically create columns with remaining overflow */
    autowrap = function() {
      var i = 1
          x = frame.attr('width') + 20
      
      /* remove existing elements */
      group.clear()
      
      /* reference main flow element */
      overflow = flow
      
      while (overflow.data('overflow')) {
        /* create aditional textflow elements */
        overflow = group.textflow(overflow.data('overflow'))
          .attr(flow.attr())
          .size(frame.attr('width'), frame.attr('height'))
          .move(frame.x() + x * i, frame.y())
        
        /* create additional framing elements */
        overframe = group.rect(frame.attr('width'), frame.attr('height'))
          .attr(frame.attr())
          .move(frame.x() + x * i, frame.y())
        
        i++
      }
    }
    
    autowrap()
    
  </script>
  
</html>